{% extends "base.html" %}
{% block content %}
    {% if fight %}
        <h1> {{ fight }}</h1>
        {% if fight.competitors.all|length == 2 %}
            <div style="display: inline-flex">
                <div>
                    <div><img class="flag-image" src="{{ fight.competitors.first.get_flag }}" alt="Flag">
                        <a href="{% url 'main:versionDetail' fight.competitors.first.id %}">{{ fight.competitors.first }}</a>
                    </div>
                    <div>
                        <img src="{{ fight.competitors.first.image.url }}" alt="Robot Image">
                    </div>
                </div>
                <div>vs</div>
                <div>
                    <div><img class="flag-image" src="{{ fight.competitors.last.get_flag }}" alt="Flag">
                        <a href="{% url 'main:versionDetail' fight.competitors.last.id %}">{{ fight.competitors.last }}</a>
                    </div>
                    <div>
                        <img src="{{ fight.competitors.last.image.url }}" alt="Robot Image">
                    </div>
                </div>
            </div>
        {% endif %}

        <div class="fight-media">
            {% if fight.internal_media or fight.external_media %}
                {% if fight.get_media_type == "LI" %}
                    <img src="{{ fight.internal_media.url }}" alt="This Image is Broken, please change it.">

                {% elif fight.get_media_type == "EI" %}
                    <img src="{{ fight.external_media }}" alt="This Image is Broken, please change it.">

                {% elif fight.get_media_type == "LV" %}
                    <video src="{{ fight.internal_media.url }}" width="800" height="450" controls></video>

                {% elif fight.get_media_type == "FB" %}
                    <div id="fb-root"></div>
                    <script async defer crossorigin="anonymous"
                            src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v13.0"
                            nonce="DsgXG9yz"></script>
                    <div class="fb-video" data-href="{{ fight.external_media }}" data-width="800" data-height="450"
                         data-show-text="false">
                        <blockquote cite="{{ fight.external_media }}" class="fb-xfbml-parse-ignore">
                            <a href="{{ fight.external_media }}">Fight Video</a>
                        </blockquote>
                    </div>

                {% elif fight.get_media_type == "IF" %}
                    <iframe src="{{ fight.external_media }}" width="800px" height="480px" title="Fight Video"
                            allowfullscreen></iframe>

                {% elif fight.get_media_type == "IG" %}
                    <blockquote class="instagram-media" data-instgrm-permalink="{{ fight.external_media }}"
                                data-instgrm-version="14"
                                style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; width:800px; min-width:326px; padding:0;">
                        Fight video on Instagram
                    </blockquote>
                    <script async src="http://www.instagram.com/embed.js"></script>

                {% elif fight.get_media_type == "TW" %}
                    <blockquote style="width: 800px;height:450px" class="twitter-tweet"><a
                            href="{{ fight.external_media }}">Fight video on Twitter.</a></blockquote>
                    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

                {% elif fight.get_media_type == "TT" %}
                    <blockquote class="tiktok-embed" cite="{{ fight.external_media }}"
                                data-video-id="{{ fight.get_tt_id }}">
                        <section></section> <!--This section tag is required, embed will fail without it. -->
                    </blockquote>
                    <script async src="https://www.tiktok.com/embed.js"></script>

                {% else %}
                    <p>We're unsure how to embed this media, here's a <a href="{{ fight.external_media }}">link.</a></p>
                {% endif %}
            {% endif %}

        </div>

    {% else %}
        something has gone wrong
    {% endif %}
{% endblock %}